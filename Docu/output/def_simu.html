<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GenSSI: Model Definition &amp; Simulation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="GenSSI-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GenSSI
   &#160;<span id="projectnumber">2016-02-19</span>
   </div>
   <div id="projectbrief">GenSSI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('def_simu.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Model Definition &amp; Simulation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In the following we will give a detailed overview how to specify models in GenSSI and how to call the code for analyzing the model. We use the Goodwin oscillator as an example.</p>
<h1><a class="anchor" id="definition"></a>
Model Definition</h1>
<p>This manual will guide the user to specify models in Matlab. For example implementations, see the models in the example directory.</p>
<h2><a class="anchor" id="header"></a>
Header</h2>
<p>The model definition needs to be defined as a function which returns a struct with all symbolic definitions and options.</p>
<div class="fragment"><div class="line"><span class="keyword">function</span> [model] = Goodwin() </div></div><!-- fragment --><h2><a class="anchor" id="name"></a>
Name</h2>
<p>Give the model a name.</p>
<div class="fragment"><div class="line">model.Name = <span class="stringliteral">&#39;Goodwin&#39;</span>; </div></div><!-- fragment --><h2><a class="anchor" id="derivatives"></a>
Derivatives</h2>
<p>Set the number of derivatives to be calculated.</p>
<div class="fragment"><div class="line">model.Nder = 8; </div></div><!-- fragment --><h2><a class="anchor" id="states"></a>
States</h2>
<p>Create the respective symbolic variables. The name of the symbolic variable can be chosen arbitrarily.</p>
<div class="fragment"><div class="line">syms x1 x2 x3 </div></div><!-- fragment --><p>Create the state vector containing all states:</p>
<div class="fragment"><div class="line">model.X = [x1 x2 x3]; </div></div><!-- fragment --><p>Define the number of states.</p>
<div class="fragment"><div class="line">model.Neq = 3; </div></div><!-- fragment --><h2><a class="anchor" id="parameters"></a>
Parameters</h2>
<p>Create the respective symbolic variables. The name of the symbolic variable can be chosen arbitrarily.</p>
<div class="fragment"><div class="line">syms p1 p2 p3 p4 p5 p6 p7 p8 </div></div><!-- fragment --><p>Create the parameters vector of parameters to be considered for identifiability.</p>
<div class="fragment"><div class="line">model.Par = [p1 p2 p3 p4 p5 p6 p7 p8]; </div></div><!-- fragment --><p>Specify the number of parameters to be considered for identifiability.</p>
<div class="fragment"><div class="line">model.Npar = 8; </div></div><!-- fragment --><h2><a class="anchor" id="equtions"></a>
Equations</h2>
<p>Define the equations of the model.</p>
<div class="fragment"><div class="line">A1 = -p4*x1+p1/(p2+x3^p3);</div><div class="line">A2 = p5*x1-p6*x2;</div><div class="line">A3 = p7*x2-p8*x3;</div><div class="line">model.F=[A1 A2 A3];</div></div><!-- fragment --><h2><a class="anchor" id="controls"></a>
Controls</h2>
<p>Define the controls.</p>
<div class="fragment"><div class="line">g1=0;</div><div class="line">g2=0;</div><div class="line">g3=0;</div><div class="line">model.G=[g1 g2 Ag3];</div></div><!-- fragment --><p>Define the number of controls.</p>
<div class="fragment"><div class="line">model.Noc = 0; </div></div><!-- fragment --><p>Note that the length of the control vector should match the number of states, even if there are fewer controls.</p>
<h2><a class="anchor" id="obserables"></a>
Observables</h2>
<p>Define the observables.</p>
<div class="fragment"><div class="line">h1 = x1;</div><div class="line">h2 = x2;</div><div class="line">h3 = x3;</div><div class="line">model.H = [h1 h2 h3];</div></div><!-- fragment --><p>Define the number of obserables.</p>
<div class="fragment"><div class="line">model.Nobs = 1; </div></div><!-- fragment --><h2><a class="anchor" id="ic"></a>
Initial Conditions</h2>
<p>Define the initial conditions.</p>
<div class="fragment"><div class="line">model.IC = [0.3 0.9 1.3];</div></div><!-- fragment --><h1><a class="anchor" id="analysis"></a>
Model Analysis</h1>
<p>The model can then be analyzed by calling genssiMain. The first parameter is the name of the model, and the second parameter is the format. If the format is absent, the model is assumed to be a function, as described above. If it is equal to 'mat', the model is assumed to be a Matlab file with name Modelname.mat (e.g. Goodwin.mat) and containing the model struct.</p>
<div class="fragment"><div class="line"><a class="code" href="genssi_main_8m.html#aac78e2620e69e2ecf610a2526a32c7fb">genssiMain</a>(<span class="stringliteral">&#39;Goodwin&#39;</span>)</div></div><!-- fragment --><p>The function genssiMain will call the model function or load the .mat file, which puts the model struct in memory. After that, it will call all other GenSSI functions required to annalyze the model.</p>
<h1><a class="anchor" id="conversion"></a>
Conversion Utilities</h1>
<p>The GenSSI package also includes some functions for converting models from one format to another.</p>
<div class="fragment"><div class="line"><a class="code" href="genssi_to_polynomial_8m.html#acef0ff085917e1375d0fc2b6feed0722">genssiToPolynomial</a> </div></div><!-- fragment --><p>genssiToPolynomial converts a model, expressed in terms of rational expressions, to pure polynomial format. This increases the number of state variables, but can sometimes significantly reduce the computational overhead for analyzing the model.</p>
<div class="fragment"><div class="line">genssiToAMICI </div></div><!-- fragment --><p>genssiToAMICI converts a GenSSI model to AMICI format. The AMICI package uses Sundials Cvodes to efficiently solve ODEs from within Matlab. It is available at <a href="https://github.com/AMICI-developer/AMICI">https://github.com/AMICI-developer/AMICI</a>.</p>
<p>Note: There are limitations to this conversion. The GenSSI model contains a list of parameters to be considered for analysis, but AMICI needs a "sym" statement containing a list of all parameters used by the model. It may be necessary to manually edit the AMICI model after conversion.</p>
<div class="fragment"><div class="line">genssiFromAMICI </div></div><!-- fragment --><p>genssiFromAMICI converts an AMICI model to GenSSI format.</p>
<p>Note: There are limitations to this conversion. The AMICI model contains a list of all parameters used by the model, but GenSSI needs a list of parameters to be considered for analysis. In addition, the GenSSI model created by the conversion contains default values for parameters such as the number of derivatives. It may be necessary to manually edit the GenSSI model after conversion.</p>
<div class="fragment"><div class="line">genssiStructToSource and amiciStructToSource </div></div><!-- fragment --><p>genssiStructToSource reads the GenSSI model struct and converts it to source format (Matlab function definition), and amiciStructToSource does the same for AMICI models. In general, the source format is more convenient for smaller models, since it is easier to modify, but the struct format, typically saved in a Matlab file (e.g. Goodwin.mat) is more convenient for large models, since it does not require editing of long lines of code. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Feb 19 2016 11:12:04 for GenSSI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
